<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Sayur5 â€” Serba Rp 5.000</title>
  <meta name="description" content="Belanja sayur serba Rp 5.000. Cepat, segar, hemat.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 100 100%27><text y=%27.9em%27 font-size=%2790%27>ðŸ¥¬</text></svg>">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    .btn{ @apply rounded-xl px-4 py-2 font-medium bg-emerald-600 text-white hover:bg-emerald-700 disabled:opacity-50; }
    .btn-outline{ @apply rounded-xl px-3 py-2 font-medium border hover:bg-slate-50; }
    .card{ @apply rounded-2xl border bg-white shadow-sm; }
    .input{ @apply border rounded-xl px-3 h-10; }
    .badge{ @apply inline-flex items-center rounded-full px-2.5 py-0.5 text-xs font-medium bg-slate-100; }
    .modal{ @apply fixed inset-0 z-50 hidden items-center justify-center bg-black/30; }
    .modal.open{ @apply flex; }
  </style>
</head>
<body class="min-h-screen bg-gradient-to-b from-emerald-50 to-white text-slate-800">
  <header class="sticky top-0 z-40 backdrop-blur bg-white/70 border-b">
    <div class="mx-auto max-w-6xl px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-2">
        <div class="p-2 rounded-2xl bg-emerald-100 text-emerald-700">ðŸ¥¬</div>
        <div class="leading-tight">
          <div class="font-bold text-lg">Sayur5</div>
          <div class="text-xs text-slate-500 -mt-0.5">Serba Rp 5.000 â€” Fresh Setiap Hari</div>
        </div>
      </div>
      <div class="hidden md:flex items-center gap-3">
        <div class="relative w-72">
          <input id="search" class="input pl-3 w-full" placeholder="Cari bayam, kangkung, wortelâ€¦" />
        </div>
        <span class="badge">Gratis ongkir min <span id="badgeFree" class="ml-1">Rp 30.000</span></span>
        <button id="btnAdmin" class="btn-outline">Admin Panel</button>
        <button id="btnCart" class="btn">Keranjang <span id="badgeQty" class="ml-2 text-xs bg-emerald-700 text-white px-2 py-0.5 rounded-full hidden">0</span></button>
      </div>
      <div class="md:hidden flex items-center gap-2">
        <button id="btnCartM" class="btn">Keranjang</button>
        <button id="btnAdminM" class="btn-outline">Admin</button>
      </div>
    </div>
  </header>

  <section class="mx-auto max-w-6xl px-4 pt-10">
    <h1 class="text-3xl md:text-5xl font-extrabold leading-tight">Sayur Fresh Serba Rp 5.000</h1>
    <p class="mt-2 text-slate-600">Belanja sayur cepat, murah, dan anti ribet. Checkout dalam hitungan detik.</p>
    <div class="mt-4 flex flex-wrap gap-2" id="categoryTabs"></div>
  </section>

  <section class="mx-auto max-w-6xl px-4 mt-6 mb-20">
    <div class="flex items-center justify-between mb-3">
      <h2 class="text-xl md:text-2xl font-bold">Katalog Hari Ini</h2>
      <div class="hidden md:flex items-center gap-2 text-sm text-slate-500">ðŸšš Estimasi kirim: 1-3 jam setelah pembayaran</div>
    </div>
    <div id="grid" class="grid sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"></div>
  </section>

  <!-- CART MODAL -->
  <div id="cartModal" class="modal">
    <div class="card max-w-lg w-full p-4 bg-white">
      <div class="flex justify-between items-center mb-2">
        <h3 class="font-semibold text-lg">Keranjang Belanja</h3>
        <button class="btn-outline" onclick="UI.closeCart()">Tutup</button>
      </div>
      <div id="cartList" class="space-y-2 max-h-80 overflow-auto"></div>
      <div class="mt-4 border-t pt-3 text-sm space-y-1">
        <div class="flex justify-between"><span>Subtotal</span><span id="cartSubtotal">Rp 0</span></div>
        <div class="flex justify-between"><span>Ongkir</span><span id="cartShip">Rp 0</span></div>
        <div class="flex justify-between font-bold text-base"><span>Total</span><span id="cartTotal">Rp 0</span></div>
      </div>
      <div class="mt-3 flex gap-2">
        <button id="btnCheckout" class="btn flex-1">Checkout</button>
        <button class="btn-outline" onclick="App.clearCart()">Kosongkan</button>
      </div>
      <div class="mt-3 p-2 bg-slate-50 rounded-xl text-xs">
        <div class="font-semibold mb-1">Pengaturan Toko</div>
        <div class="grid grid-cols-2 gap-2">
          <label class="flex items-center gap-2">Min Gratis Ongkir <input id="inpFreeMin" type="number" class="input w-full"></label>
          <label class="flex items-center gap-2">Biaya Ongkir <input id="inpOngkir" type="number" class="input w-full"></label>
        </div>
      </div>
    </div>
  </div>

  <!-- CHECKOUT MODAL -->
  <div id="checkoutModal" class="modal">
    <div class="card max-w-lg w-full p-4 bg-white">
      <div class="flex justify-between items-center mb-2">
        <h3 class="font-semibold text-lg">Checkout</h3>
        <button class="btn-outline" onclick="UI.closeCheckout()">Tutup</button>
      </div>
      <div id="checkoutEmpty" class="text-sm text-slate-500">Keranjang kosong.</div>
      <div id="checkoutForm" class="grid gap-3 hidden">
        <div class="grid md:grid-cols-2 gap-3">
          <label class="grid gap-1 text-sm"><span>Nama Penerima</span><input id="fName" class="input" placeholder="Nama lengkap"/></label>
          <label class="grid gap-1 text-sm"><span>No. HP</span><input id="fPhone" class="input" placeholder="08xxxxxxxxxx"/></label>
        </div>
        <label class="grid gap-1 text-sm"><span>Alamat</span><textarea id="fAddr" class="input h-24"></textarea></label>
        <div class="grid md:grid-cols-2 gap-3">
          <label class="grid gap-1 text-sm"><span>Metode Pembayaran</span>
            <select id="fPay" class="input"><option value="transfer">Transfer Bank</option><option value="ewallet">E-Wallet</option><option value="cod">COD</option></select>
          </label>
          <label class="grid gap-1 text-sm"><span>Catatan</span><input id="fNote" class="input" placeholder="tanpa cabe, kirim siang"/></label>
        </div>
        <div class="mt-2 border rounded-2xl p-3 bg-slate-50 text-sm">
          <div class="font-semibold mb-1">Ringkasan</div>
          <div id="sumList" class="space-y-1"></div>
          <div class="flex justify-between mt-2"><span>Subtotal</span><span id="sumSub">Rp 0</span></div>
          <div class="flex justify-between"><span>Ongkir</span><span id="sumShip">Rp 0</span></div>
          <div class="flex justify-between font-bold text-base"><span>Total</span><span id="sumTotal">Rp 0</span></div>
        </div>
        <div class="flex gap-2">
          <a id="waBtn" class="btn flex-1 text-center" target="_blank" rel="noreferrer">Pesan via WhatsApp</a>
          <button id="saveBtn" class="btn-outline">Simpan Pesanan</button>
        </div>
        <div class="text-xs text-slate-500">*Tombol WhatsApp akan membuka chat dengan format pesanan otomatis.</div>
      </div>
    </div>
  </div>

  <!-- ADMIN MODAL -->
  <div id="adminModal" class="modal">
    <div class="card max-w-5xl w-full p-4 bg-white">
      <div class="flex justify-between items-center mb-2">
        <h3 class="font-semibold text-lg">Admin Panel</h3>
        <button class="btn-outline" onclick="UI.closeAdmin()">Tutup</button>
      </div>

      <div id="adminLogin" class="grid gap-2">
        <div class="text-sm text-slate-600">Masukkan user & PIN</div>
        <div class="grid md:grid-cols-3 gap-2">
          <input id="admUser" class="input" placeholder="Username (default: owner)"/>
          <input id="admPin" class="input" type="password" placeholder="PIN (default: 1234)"/>
          <button id="admLoginBtn" class="btn">Masuk</button>
        </div>
        <div id="admErr" class="text-xs text-red-600"></div>
      </div>

      <div id="adminArea" class="hidden space-y-8">
        <div class="flex items-center justify-between">
          <div class="text-sm">Masuk sebagai <b id="admWho">owner</b></div>
          <button id="admLogout" class="btn-outline">Keluar</button>
        </div>

        <!-- Add product -->
        <section>
          <h4 class="font-semibold mb-2">Tambah Produk Baru</h4>
          <div class="grid md:grid-cols-6 gap-2 items-end">
            <input id="pId" class="input md:col-span-2" placeholder="ID unik (slug)">
            <input id="pName" class="input md:col-span-2" placeholder="Nama">
            <input id="pUnit" class="input md:col-span-1" placeholder="Isi/Unit">
            <input id="pStock" class="input md:col-span-1" type="number" placeholder="Stok" value="20">
            <input id="pPrice" class="input md:col-span-2" type="number" placeholder="Harga (Rp)" value="5000">
            <input id="pCat" class="input md:col-span-2" placeholder="Kategori" value="Sayuran Daun">
            <button id="pAdd" class="btn md:col-span-2">Tambah</button>
          </div>
          <div class="text-xs text-slate-500 mt-1">*Harga otomatis dibulatkan ke kelipatan 500, min 1.000</div>
        </section>

        <!-- Manage products -->
        <section>
          <h4 class="font-semibold mb-2">Atur Produk</h4>
          <div id="prodList" class="grid sm:grid-cols-2 gap-3"></div>
        </section>

        <!-- Shipping -->
        <section>
          <h4 class="font-semibold mb-2">Pengaturan Ongkir</h4>
          <div class="grid sm:grid-cols-2 gap-3">
            <label class="grid gap-1 text-sm">Min Gratis Ongkir <input id="setFree" type="number" class="input"/></label>
            <label class="grid gap-1 text-sm">Biaya Ongkir <input id="setOngkir" type="number" class="input"/></label>
          </div>
        </section>

        <!-- Orders -->
        <section>
          <h4 class="font-semibold mb-2">Pesanan Masuk</h4>
          <div id="orderList" class="space-y-2 max-h-72 overflow-auto"></div>
          <button id="csvBtn" class="btn-outline mt-2">Unduh CSV</button>
        </section>

        <!-- Admin manage -->
        <section>
          <h4 class="font-semibold mb-2">Manajemen Admin</h4>
          <div class="grid md:grid-cols-3 gap-2">
            <input id="newUser" class="input" placeholder="Username baru">
            <input id="newPin" class="input" type="password" placeholder="PIN baru">
            <button id="addAdminBtn" class="btn">Tambah Admin</button>
          </div>
          <ul id="adminList" class="mt-2 text-sm"></ul>
          <div class="text-[11px] text-slate-500 mt-1">*PIN disimpan sebagai hash SHA-256 di browser (localStorage).</div>
        </section>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
